# P1 Ops Governance Plan

## 1. 目标
- 将系统从“可运行”升级为“可运营、可治理、可审计”。

## 2. P1 关注域
- 稳定性（SLO/告警/故障恢复）
- 成本治理（GPU/LLM 调用成本）
- 安全治理（RBAC/密钥/访问边界）
- 容量治理（队列积压/扩缩容）

## 3. 指标与阈值（建议）

| 维度 | 指标 | 阈值 | 动作 |
|---|---|---|---|
| 可用性 | run 成功率（24h） | < 95% | 触发 P1 告警与故障会议 |
| 性能 | E2E P95 时延 | > 180s | 启动降级与容量排查 |
| 队列 | rabbitmq backlog | > 2000 且持续10分钟 | 增加 worker 副本 |
| GPU | GPU 利用率 | > 92% 且持续15分钟 | 限流或扩容 |
| 质量 | rag conflict_rate | > 0.10 | 阻断新 kb_version 推广 |
| 成本 | 单 run 成本 | 超预算 20% | 启用低成本路由策略 |

## 4. 安全与权限
- 角色：tenant_owner / tenant_admin / project_editor / project_viewer / service_account。
- 禁止公网暴露数据库、队列、对象存储管理端口。
- 密钥统一托管，禁止硬编码进镜像。

## 5. 事件与审计
- 所有关键事件必须包含 `trace_id` 与 `producer`。
- 关键写操作（发布版本、回滚、权限变更）必须写审计日志。

## 6. 例会与升级机制
- 每周：稳定性复盘 + 成本复盘。
- 每日：告警 Top5 与队列健康巡检。
- 升级触发：Blocker 连续2次或 SLO 破线 > 1h。

## 7. 阶段交付
- P1-W1：告警阈值与看板上线。
- P1-W2：RBAC 与审计补齐。
- P1-W3：成本看板与自动降级。
- P1-W4：回滚演练与故障演练。
